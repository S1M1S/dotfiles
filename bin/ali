#!/bin/bash
DF="$HOME/dotfiles"

refresh() {
  if [[ "$BASH_SUBSHELL" == "0" ]]; then
    printf '%s\n' "Must run in current context to refresh. Try '. ali refresh'." >&2
    exit 1
  fi

  source "$ZSHRC"
  echo "Freshed up!"
}

if [[ "$1" == "add" ]]; then
  echo "alias $2" >> "$DF/.zsh_aliases"
  echo "Added new alias: $2"
  refresh

elif [[ "$1" == "ed" || "$1" == "edit" ]]; then
  $EDITOR "$ZSH_CONFIG_ALIASES"
  refresh

elif [[ "$1" == "refresh" || "$1" == "ref" ]]; then
  refresh

else
  echo "USAGE:"
  echo ". ali add ALIAS"
  echo "  ali edit       ||   ali ed"
  echo ". ali refresh    || . ali ref"
fi
